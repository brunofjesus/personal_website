<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>Kubernetes Components</title><style>
/* cspell:disable-file */
/* webkit printing magic: print all background colors */
html {
	-webkit-print-color-adjust: exact;
}
* {
	box-sizing: border-box;
	-webkit-print-color-adjust: exact;
}

html,
body {
	margin: 0;
	padding: 0;
}
@media only screen {
	body {
		margin: 2em auto;
		max-width: 900px;
		color: rgb(55, 53, 47);
	}
}

body {
	line-height: 1.5;
	white-space: pre-wrap;
}

a,
a.visited {
	color: inherit;
	text-decoration: underline;
}

.pdf-relative-link-path {
	font-size: 80%;
	color: #444;
}

h1,
h2,
h3 {
	letter-spacing: -0.01em;
	line-height: 1.2;
	font-weight: 600;
	margin-bottom: 0;
}

.page-title {
	font-size: 2.5rem;
	font-weight: 700;
	margin-top: 0;
	margin-bottom: 0.75em;
}

h1 {
	font-size: 1.875rem;
	margin-top: 1.875rem;
}

h2 {
	font-size: 1.5rem;
	margin-top: 1.5rem;
}

h3 {
	font-size: 1.25rem;
	margin-top: 1.25rem;
}

.source {
	border: 1px solid #ddd;
	border-radius: 3px;
	padding: 1.5em;
	word-break: break-all;
}

.callout {
	border-radius: 3px;
	padding: 1rem;
}

figure {
	margin: 1.25em 0;
	page-break-inside: avoid;
}

figcaption {
	opacity: 0.5;
	font-size: 85%;
	margin-top: 0.5em;
}

mark {
	background-color: transparent;
}

.indented {
	padding-left: 1.5em;
}

hr {
	background: transparent;
	display: block;
	width: 100%;
	height: 1px;
	visibility: visible;
	border: none;
	border-bottom: 1px solid rgba(55, 53, 47, 0.09);
}

img {
	max-width: 100%;
}

@media only print {
	img {
		max-height: 100vh;
		object-fit: contain;
	}
}

@page {
	margin: 1in;
}

.collection-content {
	font-size: 0.875rem;
}

.column-list {
	display: flex;
	justify-content: space-between;
}

.column {
	padding: 0 1em;
}

.column:first-child {
	padding-left: 0;
}

.column:last-child {
	padding-right: 0;
}

.table_of_contents-item {
	display: block;
	font-size: 0.875rem;
	line-height: 1.3;
	padding: 0.125rem;
}

.table_of_contents-indent-1 {
	margin-left: 1.5rem;
}

.table_of_contents-indent-2 {
	margin-left: 3rem;
}

.table_of_contents-indent-3 {
	margin-left: 4.5rem;
}

.table_of_contents-link {
	text-decoration: none;
	opacity: 0.7;
	border-bottom: 1px solid rgba(55, 53, 47, 0.18);
}

table,
th,
td {
	border: 1px solid rgba(55, 53, 47, 0.09);
	border-collapse: collapse;
}

table {
	border-left: none;
	border-right: none;
}

th,
td {
	font-weight: normal;
	padding: 0.25em 0.5em;
	line-height: 1.5;
	min-height: 1.5em;
	text-align: left;
}

th {
	color: rgba(55, 53, 47, 0.6);
}

ol,
ul {
	margin: 0;
	margin-block-start: 0.6em;
	margin-block-end: 0.6em;
}

li > ol:first-child,
li > ul:first-child {
	margin-block-start: 0.6em;
}

ul > li {
	list-style: disc;
}

ul.to-do-list {
	text-indent: -1.7em;
}

ul.to-do-list > li {
	list-style: none;
}

.to-do-children-checked {
	text-decoration: line-through;
	opacity: 0.375;
}

ul.toggle > li {
	list-style: none;
}

ul {
	padding-inline-start: 1.7em;
}

ul > li {
	padding-left: 0.1em;
}

ol {
	padding-inline-start: 1.6em;
}

ol > li {
	padding-left: 0.2em;
}

.mono ol {
	padding-inline-start: 2em;
}

.mono ol > li {
	text-indent: -0.4em;
}

.toggle {
	padding-inline-start: 0em;
	list-style-type: none;
}

/* Indent toggle children */
.toggle > li > details {
	padding-left: 1.7em;
}

.toggle > li > details > summary {
	margin-left: -1.1em;
}

.selected-value {
	display: inline-block;
	padding: 0 0.5em;
	background: rgba(206, 205, 202, 0.5);
	border-radius: 3px;
	margin-right: 0.5em;
	margin-top: 0.3em;
	margin-bottom: 0.3em;
	white-space: nowrap;
}

.collection-title {
	display: inline-block;
	margin-right: 1em;
}

time {
	opacity: 0.5;
}

.icon {
	display: inline-block;
	max-width: 1.2em;
	max-height: 1.2em;
	text-decoration: none;
	vertical-align: text-bottom;
	margin-right: 0.5em;
}

img.icon {
	border-radius: 3px;
}

.user-icon {
	width: 1.5em;
	height: 1.5em;
	border-radius: 100%;
	margin-right: 0.5rem;
}

.user-icon-inner {
	font-size: 0.8em;
}

.text-icon {
	border: 1px solid #000;
	text-align: center;
}

.page-cover-image {
	display: block;
	object-fit: cover;
	width: 100%;
	height: 30vh;
}

.page-header-icon {
	font-size: 3rem;
	margin-bottom: 1rem;
}

.page-header-icon-with-cover {
	margin-top: -0.72em;
	margin-left: 0.07em;
}

.page-header-icon img {
	border-radius: 3px;
}

.link-to-page {
	margin: 1em 0;
	padding: 0;
	border: none;
	font-weight: 500;
}

p > .user {
	opacity: 0.5;
}

td > .user,
td > time {
	white-space: nowrap;
}

input[type="checkbox"] {
	transform: scale(1.5);
	margin-right: 0.6em;
	vertical-align: middle;
}

p {
	margin-top: 0.5em;
	margin-bottom: 0.5em;
}

.image {
	border: none;
	margin: 1.5em 0;
	padding: 0;
	border-radius: 0;
	text-align: center;
}

.code,
code {
	background: rgba(135, 131, 120, 0.15);
	border-radius: 3px;
	padding: 0.2em 0.4em;
	border-radius: 3px;
	font-size: 85%;
	tab-size: 2;
}

code {
	color: #eb5757;
}

.code {
	padding: 1.5em 1em;
}

.code-wrap {
	white-space: pre-wrap;
	word-break: break-all;
}

.code > code {
	background: none;
	padding: 0;
	font-size: 100%;
	color: inherit;
}

blockquote {
	font-size: 1.25em;
	margin: 1em 0;
	padding-left: 1em;
	border-left: 3px solid rgb(55, 53, 47);
}

.bookmark {
	text-decoration: none;
	max-height: 8em;
	padding: 0;
	display: flex;
	width: 100%;
	align-items: stretch;
}

.bookmark-title {
	font-size: 0.85em;
	overflow: hidden;
	text-overflow: ellipsis;
	height: 1.75em;
	white-space: nowrap;
}

.bookmark-text {
	display: flex;
	flex-direction: column;
}

.bookmark-info {
	flex: 4 1 180px;
	padding: 12px 14px 14px;
	display: flex;
	flex-direction: column;
	justify-content: space-between;
}

.bookmark-image {
	width: 33%;
	flex: 1 1 180px;
	display: block;
	position: relative;
	object-fit: cover;
	border-radius: 1px;
}

.bookmark-description {
	color: rgba(55, 53, 47, 0.6);
	font-size: 0.75em;
	overflow: hidden;
	max-height: 4.5em;
	word-break: break-word;
}

.bookmark-href {
	font-size: 0.75em;
	margin-top: 0.25em;
}

.sans { font-family: ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol"; }
.code { font-family: "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace; }
.serif { font-family: Lyon-Text, Georgia, ui-serif, serif; }
.mono { font-family: iawriter-mono, Nitti, Menlo, Courier, monospace; }
.pdf .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK JP'; }
.pdf:lang(zh-CN) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK SC'; }
.pdf:lang(zh-TW) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK TC'; }
.pdf:lang(ko-KR) .sans { font-family: Inter, ui-sans-serif, -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, "Apple Color Emoji", Arial, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol", 'Twemoji', 'Noto Color Emoji', 'Noto Sans CJK KR'; }
.pdf .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .code { font-family: Source Code Pro, "SFMono-Regular", Menlo, Consolas, "PT Mono", "Liberation Mono", Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.pdf .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK JP'; }
.pdf:lang(zh-CN) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK SC'; }
.pdf:lang(zh-TW) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK TC'; }
.pdf:lang(ko-KR) .serif { font-family: PT Serif, Lyon-Text, Georgia, ui-serif, serif, 'Twemoji', 'Noto Color Emoji', 'Noto Serif CJK KR'; }
.pdf .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK JP'; }
.pdf:lang(zh-CN) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK SC'; }
.pdf:lang(zh-TW) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK TC'; }
.pdf:lang(ko-KR) .mono { font-family: PT Mono, iawriter-mono, Nitti, Menlo, Courier, monospace, 'Twemoji', 'Noto Color Emoji', 'Noto Sans Mono CJK KR'; }
.highlight-default {
}
.highlight-gray {
	color: rgb(155,154,151);
}
.highlight-brown {
	color: rgb(100,71,58);
}
.highlight-orange {
	color: rgb(217,115,13);
}
.highlight-yellow {
	color: rgb(223,171,1);
}
.highlight-teal {
	color: rgb(15,123,108);
}
.highlight-blue {
	color: rgb(11,110,153);
}
.highlight-purple {
	color: rgb(105,64,165);
}
.highlight-pink {
	color: rgb(173,26,114);
}
.highlight-red {
	color: rgb(224,62,62);
}
.highlight-gray_background {
	background: rgb(235,236,237);
}
.highlight-brown_background {
	background: rgb(233,229,227);
}
.highlight-orange_background {
	background: rgb(250,235,221);
}
.highlight-yellow_background {
	background: rgb(251,243,219);
}
.highlight-teal_background {
	background: rgb(221,237,234);
}
.highlight-blue_background {
	background: rgb(221,235,241);
}
.highlight-purple_background {
	background: rgb(234,228,242);
}
.highlight-pink_background {
	background: rgb(244,223,235);
}
.highlight-red_background {
	background: rgb(251,228,228);
}
.block-color-default {
	color: inherit;
	fill: inherit;
}
.block-color-gray {
	color: rgba(55, 53, 47, 0.6);
	fill: rgba(55, 53, 47, 0.6);
}
.block-color-brown {
	color: rgb(100,71,58);
	fill: rgb(100,71,58);
}
.block-color-orange {
	color: rgb(217,115,13);
	fill: rgb(217,115,13);
}
.block-color-yellow {
	color: rgb(223,171,1);
	fill: rgb(223,171,1);
}
.block-color-teal {
	color: rgb(15,123,108);
	fill: rgb(15,123,108);
}
.block-color-blue {
	color: rgb(11,110,153);
	fill: rgb(11,110,153);
}
.block-color-purple {
	color: rgb(105,64,165);
	fill: rgb(105,64,165);
}
.block-color-pink {
	color: rgb(173,26,114);
	fill: rgb(173,26,114);
}
.block-color-red {
	color: rgb(224,62,62);
	fill: rgb(224,62,62);
}
.block-color-gray_background {
	background: rgb(235,236,237);
}
.block-color-brown_background {
	background: rgb(233,229,227);
}
.block-color-orange_background {
	background: rgb(250,235,221);
}
.block-color-yellow_background {
	background: rgb(251,243,219);
}
.block-color-teal_background {
	background: rgb(221,237,234);
}
.block-color-blue_background {
	background: rgb(221,235,241);
}
.block-color-purple_background {
	background: rgb(234,228,242);
}
.block-color-pink_background {
	background: rgb(244,223,235);
}
.block-color-red_background {
	background: rgb(251,228,228);
}
.select-value-color-default { background-color: rgba(206,205,202,0.5); }
.select-value-color-gray { background-color: rgba(155,154,151, 0.4); }
.select-value-color-brown { background-color: rgba(140,46,0,0.2); }
.select-value-color-orange { background-color: rgba(245,93,0,0.2); }
.select-value-color-yellow { background-color: rgba(233,168,0,0.2); }
.select-value-color-green { background-color: rgba(0,135,107,0.2); }
.select-value-color-blue { background-color: rgba(0,120,223,0.2); }
.select-value-color-purple { background-color: rgba(103,36,222,0.2); }
.select-value-color-pink { background-color: rgba(221,0,129,0.2); }
.select-value-color-red { background-color: rgba(255,0,26,0.2); }

.checkbox {
	display: inline-flex;
	vertical-align: text-bottom;
	width: 16;
	height: 16;
	background-size: 16px;
	margin-left: 2px;
	margin-right: 5px;
}

.checkbox-on {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20width%3D%2216%22%20height%3D%2216%22%20fill%3D%22%2358A9D7%22%2F%3E%0A%3Cpath%20d%3D%22M6.71429%2012.2852L14%204.9995L12.7143%203.71436L6.71429%209.71378L3.28571%206.2831L2%207.57092L6.71429%2012.2852Z%22%20fill%3D%22white%22%2F%3E%0A%3C%2Fsvg%3E");
}

.checkbox-off {
	background-image: url("data:image/svg+xml;charset=UTF-8,%3Csvg%20width%3D%2216%22%20height%3D%2216%22%20viewBox%3D%220%200%2016%2016%22%20fill%3D%22none%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%0A%3Crect%20x%3D%220.75%22%20y%3D%220.75%22%20width%3D%2214.5%22%20height%3D%2214.5%22%20fill%3D%22white%22%20stroke%3D%22%2336352F%22%20stroke-width%3D%221.5%22%2F%3E%0A%3C%2Fsvg%3E");
}
	
</style></head><body><article id="61f0d924-4a77-4e1d-a555-345a80b4ac1f" class="page sans"><header><h1 class="page-title">Kubernetes Components</h1></header><div class="page-body"><h2 id="9f1d9ee1-d242-42df-a9c9-4ad76d1e27b4" class="">Namespace</h2><blockquote id="ee8f5cf5-17ec-48db-b8cb-056e1b7a597e" class="">Kubernetes supports multiple virtual clusters backed by the same physical cluster. These virtual clusters are called namespaces.</blockquote><blockquote id="980d07d6-eaa7-425b-b3a9-d260bec68e93" class="">Namespaces are intended for use in environments with many users spread across multiple teams, or projects. For clusters with a few to tens of users, you should not need to create or think about namespaces at all. Start using namespaces when you need the features they provide.</blockquote><blockquote id="f9f662a2-3be2-422c-be7c-864a05eb8731" class="">Namespaces are a way to divide cluster resources between multiple users (via resource quota).</blockquote><p id="9061ea3c-6ef8-4a1e-b224-801ca70826a0" class="">
</p><p id="47571aa9-4be7-48cf-bb43-0a67ca515670" class="">Kubernetes already provides 4 namespaces by default, being:<div class="indented"><ul id="160ed58c-5fa1-43f8-ab05-6967b954d84f" class="bulleted-list"><li><strong>default</strong><ul id="48a9f36f-6951-4978-b8c2-05800b19c875" class="bulleted-list"><li>Holds the resources created by the user (if no other namespace is specified in the resource creation)</li></ul></li></ul><ul id="24757898-90ae-452b-87f6-d99aad30737f" class="bulleted-list"><li><strong>kube-node-lease</strong><ul id="099a3a95-50d3-4797-b6d3-1373e2a5ce83" class="bulleted-list"><li>Holds info about heartbeats of nodes</li></ul><ul id="4d35eab2-0e53-4d76-9d3e-90d1b8808ef9" class="bulleted-list"><li>Each node has an associated lease object in the namespace</li></ul><ul id="02c3de91-30b7-4ce6-8963-dd1bc7960728" class="bulleted-list"><li>Determines the availability of a node </li></ul></li></ul><ul id="2139f0e2-b0c1-4c34-ba4d-938308c316f7" class="bulleted-list"><li><strong>kube-public</strong><ul id="536dc7d7-b7f6-4d35-9ad1-75f311ba6501" class="bulleted-list"><li>Contains public accessible date</li></ul><ul id="2b8ab6c8-e694-4244-8a7d-d755f558ac23" class="bulleted-list"><li>Has a configMap with cluster information (<strong>kubectl cluster-info</strong>)</li></ul></li></ul><ul id="5294b4fb-d986-4989-9763-5e7c67cb299c" class="bulleted-list"><li><strong>kube-system</strong><ul id="efba3452-144c-4411-88dc-c4c7f3652e0b" class="bulleted-list"><li>Should not be touched manually</li></ul><ul id="ecd157b8-3696-47fc-a179-44cd383c5459" class="bulleted-list"><li>Contains system processes</li></ul></li></ul></div></p><h2 id="84448629-dbcf-48a3-880c-bd522c6bee32" class="">Cluster</h2><blockquote id="08788602-0bcd-44fd-9e0d-d366a6b5c1b6" class="">A set of Nodes that run containerized applications managed by Kubernetes. For this example, and in most common Kubernetes deployments, nodes in the cluster are not part of the public internet.</blockquote><h2 id="32159d47-dee8-4221-a551-bbe17f2b1cdf" class="">Node</h2><p id="a8df2435-fdc3-4f19-8836-240898413e3a" class="">Server</p><h2 id="4c0ba663-ffda-44d5-8d92-5faca64b544f" class="">Pod</h2><blockquote id="c7031511-127d-4db7-8b57-78a2d49a2f5d" class="">A pod is the smallest execution unit in Kubernetes. A pod encapsulates one or more applications. Pods are ephemeral by nature, if a pod (or the node it executes on) fails, Kubernetes can automatically create a new replica of that pod to continue operations. Pods include one or more containers (such as Docker containers).</blockquote><p id="a98c335f-fed7-4434-bf84-30f320771bff" class="">Usually we only use a container per each <strong>pod</strong>.</p><p id="3742a139-354c-42b1-ab01-92c9d59b2c8f" class="">K8s manages an internal network and it assigns an address to each <strong>pod</strong>.</p><p id="a1944b66-b2a2-433e-acd3-fd2b50ae98f0" class="">When a <strong>pod</strong> is recreated <strong>k8s</strong> assigns it a new IP address (that&#x27;s why we should use <strong>Service</strong> and <strong>Ingress</strong>).</p><h2 id="5c1f1948-77b1-46ec-8dcb-3561849959ea" class="">Service</h2><blockquote id="9fac5cdd-a451-4762-bae0-a19f0c935b5c" class="">An abstract way to expose an application running on a set of Pods as a network service.
With Kubernetes you don&#x27;t need to modify your application to use an unfamiliar service discovery mechanism. Kubernetes gives Pods their own IP addresses and a single DNS name for a set of Pods, and can load-balance across them.</blockquote><p id="2f06f883-7078-4864-a696-560941ed0bb5" class="">It is a permanent IP address that can be attached to a <strong>pod </strong>and it&#x27;s replicas<strong> </strong>via <strong>selectors</strong>.</p><p id="68c003bd-bc19-46ba-bf04-a62893a359d6" class="">There&#x27;s no connection between the lifecycles of a <strong>pod </strong>and a <strong>service</strong>, meaning that if a <strong>pod</strong> &quot;dies&quot; the service remains there.</p><p id="3e9c3449-2711-44f3-85c5-3593e0d58873" class="">You can have <strong>External</strong> and <strong>Internal</strong> services, the first one is exposed to the outside.</p><p id="7f8fbb0e-1ffb-4930-9ecb-4771dca55997" class="">Services can also act as load balancers when the <strong>pod</strong> has replicas.</p><p id="13b98307-3252-4c40-8e99-e68f090e6619" class="">When we create a service K8s will also create an <strong>endpoint</strong> object with the same name as the <strong>service</strong>, this is used to keep track of which pods are members/endpoints of the service.</p><p id="fb4de8fd-a50a-45f6-8e74-390f45ccbce8" class="">The <strong>service</strong> knows which port of the service it has to redirect to because it is specified on the configuration yaml has <code>spec.ports.targetPort</code>, the <code>spec.ports.port</code> it&#x27;s the entry port of the service.</p><h3 id="52aeea9d-5ca4-4cf4-bbb1-d3b619612a78" class="">Service Types</h3><p id="6878bf14-e84f-45c0-97b5-fca0ee42cbd2" class="">The service type can be specified in <code>spec.type</code>.</p><p id="95a7ba7f-5792-4062-bf99-03073ad2468f" class="">
</p><ul id="c9e2b0f6-eb0a-4080-89fe-9585bb8e2856" class="bulleted-list"><li>ClusterIP - default type<ul id="8ae13081-b831-410d-964f-5644aa74f3af" class="bulleted-list"><li>It&#x27;s an internal service</li></ul><ul id="1826ad8c-870c-4f93-af1d-b33f1daa55d1" class="bulleted-list"><li><strong>Headless Services</strong><ul id="0167d108-d71f-4b62-8482-e8cbc088d15e" class="bulleted-list"><li>Used when we want to communicate with <strong>1 specific pod directly</strong> (no LoadBalancing).</li></ul><ul id="53c7ef6b-7b78-4d0c-89c5-c17f9ad0a649" class="bulleted-list"><li>It&#x27;s useful for comunicating with <strong>stateful</strong> applications (i.e: using the <strong>master</strong> database pod to do a write operation).</li></ul><ul id="f204d016-2fb4-4775-a50d-65e7d9f7e010" class="bulleted-list"><li>We specify a service as <strong>headless</strong> by setting the <code>spec.clusterIP</code> to <code>None</code>.</li></ul></li></ul></li></ul><ul id="4895dfde-df5a-4ba3-aabd-a857acaff20b" class="bulleted-list"><li>NodePort<ul id="144b8a85-b91a-412c-9338-6db4404db4cc" class="bulleted-list"><li>Exposes the service on each <strong>Node&#x27;s </strong>IP at a static port, meaning it can be accessed from the outside (similar to a NAT port forwarding).</li></ul><ul id="1ac8cd25-1c5c-497d-a63f-5bd9a957e7d4" class="bulleted-list"><li>The outside port is specified in <code>spec.ports.nodePort</code> and it can have a value between <strong>30000 </strong>and <strong>32767</strong>.</li></ul><ul id="d4d37b45-baa0-44f7-8217-7eaed25fe667" class="bulleted-list"><li>A ClusterIP Service, to which the <strong>NodePort</strong> Service routes, is automatically created. You&#x27;ll be able to contact the <strong>NodePort</strong> Service, from outside the cluster, by requesting <code>&lt;NodeIP&gt;:&lt;NodePort&gt;</code>.</li></ul><ul id="6afd34b4-456c-47f9-b61b-1f2975089e6c" class="bulleted-list"><li>The <strong>NodePort </strong>is an extension of the <strong>ClusterIP</strong> service.</li></ul></li></ul><ul id="669286e4-b42d-4d68-ab82-0b1130eb6aa7" class="bulleted-list"><li>LoadBalancer<ul id="f692e6a7-4843-465f-9f2d-6c0c78aee6af" class="bulleted-list"><li>Exposes the service externally through a <strong>LoadBalancer </strong>from the <strong>cloud provider</strong>.</li></ul><ul id="b9cadb40-c5bf-4c08-b37b-95521f684ce9" class="bulleted-list"><li><strong>NodePort</strong> and <strong>ClusterIP</strong> services are automatically created and the <strong>LoadBalancer </strong>will route through them.</li></ul><ul id="2214795c-b996-4fc7-bc7f-a09c4275e655" class="bulleted-list"><li>We also need to add a <code>spec.ports.nodePort</code> but that port will only be exposed to the LoadBalancer that will then route to the <strong>ClusterIP</strong>.</li></ul><ul id="14ce879d-e3d0-4cc1-a5ce-d8041561c252" class="bulleted-list"><li>The <strong>LoadBalancer</strong> is an extension of the <strong>NodePort</strong> Service</li></ul></li></ul><h2 id="2314e5c5-132b-48a4-81a7-a687aed73479" class="">Ingress</h2><blockquote id="ff214a79-360e-44af-82aa-1e0fb367df76" class="">Ingress exposes HTTP and HTTPS routes from outside the cluster to services within the cluster. Traffic routing is controlled by rules defined on the Ingress resource.</blockquote><blockquote id="d50731f4-0527-4007-a503-4e1665f90c98" class="">Here is a simple example where an Ingress sends all its traffic to one Service: </blockquote><figure id="95263ebe-dda4-4bae-957d-56d1871e6b91" class="image"><a href="Kubernetes%20Components%2061f0d9244a774e1da555345a80b4ac1f/Untitled.png"><img style="width:1288px" src="Kubernetes%20Components%2061f0d9244a774e1da555345a80b4ac1f/Untitled.png"/></a></figure><p id="99bca388-0766-4f75-bf52-781d3a513bea" class="">An ingress alone won&#x27;t work, we also need an ingress controller, an ingress controller can be installed on a pod.</p><p id="093320d9-3162-4c5e-841e-ad3b5e69ed9c" class="">The ingress controller evaluates all the routes and manages the redirections, it&#x27;s the entry point for the cluster.</p><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="4d8022ba-959a-44c2-ae67-4a5a34412443"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">On <strong>minikube</strong> we can install an <strong>Nginx</strong> ingress controller with: 
<code>minikube addons enable ingress</code></div></figure><h2 id="b6378448-d546-419d-ad35-a9d2dd6ec9a3" class="">ConfigMap</h2><blockquote id="655bdddd-c0c0-442f-9a7b-825e56d31f5a" class="">A ConfigMap is an API object used to store non-confidential data in key-value pairs. Pods can consume ConfigMaps as environment variables, command-line arguments, or as configuration files in a volume.</blockquote><p id="87d7a0e7-86ac-417e-a970-cb2cfd01fe3b" class="">
</p><p id="92bdeea4-a3fd-4866-a716-2b8b265e307f" class="">We can use <strong>ConfigMap </strong>to store external configurations of the applications like urls to other <strong>pods</strong>.</p><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="e240f35b-e77b-47f5-bdcc-bdbd4905a39b"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Not suitable for storing passwords or other kind of credentials. For that use <strong>Secret</strong>.</div></figure><h2 id="c2805fd4-572b-4cc6-ad0c-f15db54e4ad9" class="">Secret</h2><p id="1b3a3100-4047-40fd-b751-02a95cd15421" class="">Secrets are similar to <strong>ConfigMaps</strong> but are used to store sensitive data.</p><h2 id="ff62432e-1cbc-49c6-b1a5-517c9efcd243" class="">Volume</h2><p id="92e31b22-74a6-40bb-8147-534ffb0e87e7" class="">Since <strong>pods </strong>are ephemeral all the data can be easily lost, a <strong>volume</strong> is a storage component, meaning that even if a pod is destroyed, we can use <strong>volumes</strong> to make sure that the important data remains there.</p><p id="690ebe81-d7ad-47d9-8877-ac6b9ffe05af" class="">A volume can have its storage on a local machine or in a remote storage outside of the cluster (another cloud, on prem, etc).</p><figure class="block-color-gray_background callout" style="white-space:pre-wrap;display:flex" id="0f550b5b-ecf5-46c8-a22b-c270e2fca14f"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">K8s doesn&#x27;t manage data persistence, meaning that the volumes are <strong>outside</strong> of the cluster. </div></figure><h3 id="7b2413b9-2160-40d0-b28a-16551e25a422" class="">Persistent Volume</h3><p id="44de14a2-d70b-41bd-a6cd-47ece95ac16b" class="">Functions as an interface to the actual storage. The actual storage can be the <strong>local disk</strong> or an external <strong>server</strong>. In the creation of the <strong>Persistent Volume</strong> we need to specify what <strong>storage backend</strong> we want to use.</p><figure class="block-color-yellow_background callout" style="white-space:pre-wrap;display:flex" id="89286916-a312-4a90-9e08-120f06a3bdb9"><div style="font-size:1.5em"><span class="icon">💡</span></div><div style="width:100%">Persistent volumes are <strong>NOT</strong> namespaced, they can be accessed from anywhere inside the cluster.</div></figure><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="2a8268c3-8781-4c29-96bc-4b16772f9985"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Local volumes have two problems, they are tied to one specific node and will not survive a cluster crash.</div></figure><h3 id="966795f0-2a05-4ed2-bc79-d4c78b1a50f8" class="">Persistent Volume Claim</h3><p id="8796d026-7673-4422-8834-902b1aff4aec" class="">Request for storage by a user, <strong>PVCs (persistent volume claims)</strong> consume <strong>PVs (persistent volumes)</strong> resources. A <strong>PVC </strong>can request specific size and access modes (ReadWriteOnce, ReadOnlyMany, ReadWriteMany, etc).</p><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="2cdbe863-5a42-4beb-b2c7-c8b202b2c0f7"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">A claim must be in the same namespace of the <strong>pod</strong> using the claim.</div></figure><h3 id="fd01e52e-8ab4-44ca-b2d6-1302ec7fa2fb" class="">Storage Class</h3><p id="7adc7972-1133-435e-b729-d9b88e22879f" class="">A storage class provisions Persistent Volumes <strong>dynamically</strong>, whenever a <strong>PersistentVolumeClaim</strong> claims it.</p><p id="3d568f83-a39e-4f68-b147-0016b0024b7c" class="">In the <strong>storage class</strong> we need to specify a <strong>provisioner (storage backend)</strong>. We also configure other pararmeters like the storage size for example.</p><p id="c7da4ad5-4b66-417b-875a-8cb8c87dd95d" class="">The storage classs requested in the <strong>PersistentVolumeClaim </strong>under <code>spec.storageClassName</code>.</p><h2 id="48dd23be-8345-4aa2-8cae-345814a18f4c" class="">Deployment</h2><p id="4fbd41f8-36a9-4a96-94fc-abc1adc9f91b" class="">A deployment is a blueprint for the application <strong>pods</strong>. With <strong>deployments </strong>we can specify the definition of the <strong>pods</strong> and the <strong>ReplicaSets</strong>.</p><p id="86df6c9e-4511-4872-b903-9fba31767579" class="">Deployments can be loosely described as an abstraction of <strong>pods.</strong></p><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="c5461f9a-1593-4ea6-bd99-ac2bc0040569"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Deployments should only be used for <strong>stateLESS</strong> pods, when there&#x27;s a need to replicate <strong>stateFUL</strong> pods (i.e: databases) we should use <strong>StatefulSet</strong>.</div></figure><h2 id="b6b5da15-9efc-41f5-9897-645fdca0d293" class="">StatefulSet</h2><blockquote id="66a3374b-b9cd-4caa-895c-83b935964e5b" class="">Manages the deployment and scaling of a set of Pods, and provides guarantees about the ordering and uniqueness of these Pods.</blockquote><p id="e1589824-9659-4a3a-9c32-b5947457f418" class="">The StatefulSet is complex, so usually databases are often hosted outside of the K8s cluster.</p><p id="37875a72-b507-4faf-800d-0d6884ae5d27" class="">Usually a stateful application cannot be randomly addresses and cannot be created/deleted at the same time.</p><p id="b2dfb622-ad36-466d-8689-4350ea271323" class="">A stateful set mantains a sticky identity for each pod (pods in a <strong>StatefulSet</strong> are not interchangeable), meaning that even if the event of a <strong>re-schedule</strong> the identity is still the same.</p><h3 id="b683dcca-8bfc-493e-a188-9b761efcf82c" class="">The problem</h3><figure id="db70ba79-20fd-419e-bfb2-c507937ba166" class="image"><a href="Kubernetes%20Components%2061f0d9244a774e1da555345a80b4ac1f/Untitled%201.png"><img style="width:978px" src="Kubernetes%20Components%2061f0d9244a774e1da555345a80b4ac1f/Untitled%201.png"/></a></figure><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="d08182b0-3af8-4969-8d2f-4b5e35b9f4c1"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Both pods cannot access the data at the same time because they are running <strong>stateful </strong>applications.</div></figure><h3 id="72063a49-5e76-4cf8-a6a7-2df85b1a97bc" class="">The solution</h3><figure id="299db14d-d74a-4c93-a809-e4604108b709" class="image"><a href="Kubernetes%20Components%2061f0d9244a774e1da555345a80b4ac1f/Untitled%202.png"><img style="width:1284px" src="Kubernetes%20Components%2061f0d9244a774e1da555345a80b4ac1f/Untitled%202.png"/></a></figure><figure class="block-color-red_background callout" style="white-space:pre-wrap;display:flex" id="c2056a1a-2de6-4900-97d8-2428d1eb1361"><div style="font-size:1.5em"><span class="icon">❗</span></div><div style="width:100%">Those nodes are not using the same physical storage, they are using different persistent volumes with the data replicated between them.</div></figure><p id="ee49571b-cb17-4019-915b-e60eacbfe8d6" class="">What K8s doesn&#x27;t do:</p><ul id="2b7dce28-fd35-4db0-822d-ee9dc758e959" class="bulleted-list"><li>Configuration of the cloning and data synchronization</li></ul><ul id="cf72a958-fd1c-47be-ad77-f9509128e0e2" class="bulleted-list"><li>Make the remote storage available</li></ul><ul id="e3894192-0f18-421d-976f-86b1749bb84e" class="bulleted-list"><li>Backups</li></ul></div></article></body></html>